{% extends "bugtracker/index.html" %}

{% block content %}

{% load static %}

<div class="page-header">
    <h3>Resultados Generales Evaluaciones del Servicio</h3>
</div>

<div class="row">
    <div class="col-md-12">
        <h3>Filtrar:</h3>
        <div class="form-group col-md-3">
            <label>Fecha Inicial:</label>
            <input type="date" id="init_date_results" class="form-control">
        </div>
        <div class="form-group col-md-3">
            <label>Fecha Final:</label>
            <input type="date" id="end_date_results" class="form-control">
        </div>
        <div class="form-group col-md-3">
            <br>
            <button type="button" onclick="filterEvaluationsResults()" class="btn btn-default btn-sm pull-left">
                <i class="fa fa-filter"></i> Filtro
            </button>
        </div>
        <div class="form-group col-md-3">
            <br>
            <button type="button" onclick="excel('2')" class="btn btn-success btn-sm pull-right">
                <i class="fa fa-file-excel-o"></i> Ver en Excel
            </button>
        </div>
    </div>

    <br/><br/>

    <div id="show-data">
        <div class="col-md-12" id="clone-data">
        <table class="table table-bordered">
            <tr>
                <th style="width: 40%;">
                    Número de evaluaciones presentadas:
                </td>
                <td style="text-align: center;" id="total-evaluations">
                    {{ cant }}
                </td>
            </tr>
        </table>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">¿Su solicitud fue resuelta?</h3>
            </div>
            <div class="panel-body">
                <div class="col-md-6">
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>No resuelta</th>
                            <td id="resolve1">{{ resolve.1 }}</td>
                        </tr>
                        <tr>
                            <th>Fue resuelta completamente</th>
                            <td id="resolve5">{{ resolve.5 }}</td>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div class="col-md-6">
                    <canvas id="chart-resolve" width="100%"></canvas>
                </div>
                <input type="hidden" id="resolve"
                       value="{{resolve.1}},{{resolve.5}}">
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    El Tiempo en atender su solicitud fue:
                </h3>
            </div>
            <div class="panel-body">
                <div class="col-md-6">
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>Muy lento</th>
                            <td id="time1">{{ time.1 }}</td>
                        </tr>
                        <tr>
                            <th>Lento</th>
                            <td id="time2">{{ time.2 }}</td>
                        </tr>
                        <tr>
                            <th>Rápido</th>
                            <td id="time3">{{ time.3 }}</td>
                        </tr>
                        <tr>
                            <th>Muy rápido</th>
                            <td id="time5">{{ time.5 }}</td>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div class="col-md-6">
                    <canvas id="chart-time" width="100%"></canvas>
                </div>
                <input type="hidden" id="time"
                       value="{{time.1}},{{time.2}},{{time.3}},{{time.5}}">
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    EL nivel de dificultad para usar el software de
                    reporte de incidencias fue:
                </h3>
            </div>
            <div class="panel-body">
                <div class="col-md-6">
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>Muy fácil</th>
                            <td id="difficulty1">{{ difficulty.1 }}</td>
                        </tr>
                        <tr>
                            <th>Fácil</th>
                            <td id="difficulty2">{{ difficulty.2 }}</td>
                        </tr>
                        <tr>
                            <th>Difícil</th>
                            <td id="difficulty3">{{ difficulty.3 }}</td>
                        </tr>
                        <tr>
                            <th>Muy difícil</th>
                            <td id="difficulty5">{{ difficulty.5 }}</td>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div class="col-md-6">
                    <canvas id="chart-difficulty" width="100%"></canvas>
                </div>
                <input type="hidden" id="difficulty"
                       value="{{difficulty.1}},{{difficulty.2}},{{difficulty.3}},{{difficulty.5}}">
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    ¿Fue contactado por alguno de estos medios para resolver su
                    solicitud?
                </h3>
            </div>
            <div class="panel-body">
                <div class="col-md-6">
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>Extensión telefónica</th>
                            <td id="contact1">{{ contact.1 }}</td>
                        </tr>
                        <tr>
                            <th>Correo electrónico</th>
                            <td id="contact2">{{ contact.2 }}</td>
                        </tr>
                        <tr>
                            <th>Celular</th>
                            <td id="contact3">{{ contact.3 }}</td>
                        </tr>
                        <tr>
                            <th>Chat</th>
                            <td id="contact4">{{ contact.4 }}</td>
                        </tr>
                        <tr>
                            <th>Ninguno</th>
                            <td id="contact5">{{ contact.5 }}</td>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div class="col-md-6">
                    <canvas id="chart-contact" width="100%"></canvas>
                </div>
                <input type="hidden" id="contact"
                       value="{{contact.1}},{{contact.2}},{{contact.3}},{{contact.4}},{{contact.5}}">
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">
                    Nivel de satisfacción con la atención recibida:
                </h3>
            </div>
            <div class="panel-body">
                <div class="col-md-6">
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>Muy insatisfecho</th>
                            <td id="satisfied1">{{ satisfied.1 }}</td>
                        </tr>
                        <tr>
                            <th>Insatisfecho</th>
                            <td id="satisfied2">{{ satisfied.2 }}</td>
                        </tr>
                        <tr>
                            <th>Satisfecho</th>
                            <td id="satisfied3">{{ satisfied.3 }}</td>
                        </tr>
                        <tr>
                            <th>Muy satisfecho</th>
                            <td id="satisfied5">{{ satisfied.5 }}</td>
                        </tr>
                        </thead>
                    </table>
                </div>
                <div class="col-md-6">
                    <canvas id="chart-satisfied" width="100%"></canvas>
                </div>
                <input type="hidden" id="satisfied"
                       value="{{satisfied.1}},{{satisfied.2}},{{satisfied.3}},{{satisfied.5}}">
            </div>
        </div>
    </div>
    </div>

    <input type="hidden" id="url_get_issue_filters"
                        value="{% url 'issue_evaluation_filter_est' %}">
</div>

<script type="text/javascript"
        src="{% static 'js/jquery-3.1.0.min.js' %}"></script>
<script type="text/javascript"
        src="{% static 'js/graphic_data.js' %}"></script>

{% endblock %}
